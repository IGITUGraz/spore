<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>SPORE: spore::SynapticSamplingRewardGradientConnection&lt; targetidentifierT &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <a href="https://github.com/IGITUGraz/spore-nest-module">
      <img alt="NEST module SPORE" src="spore-header.svg" height=72 />
    </a>
  </td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacespore.html">spore</a></li><li class="navelem"><a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html">SynapticSamplingRewardGradientConnection</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classspore_1_1SynapticSamplingRewardGradientConnection-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">spore::SynapticSamplingRewardGradientConnection&lt; targetidentifierT &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Reward-based synaptic sampling connection class.  
 <a href="classspore_1_1SynapticSamplingRewardGradientConnection.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="synaptic__sampling__rewardgradient__connection_8h_source.html">synaptic_sampling_rewardgradient_connection.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for spore::SynapticSamplingRewardGradientConnection&lt; targetidentifierT &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classspore_1_1SynapticSamplingRewardGradientConnection__inherit__graph.png" border="0" usemap="#spore_1_1SynapticSamplingRewardGradientConnection_3_01targetidentifierT_01_4_inherit__map" alt="Inheritance graph"/></div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for spore::SynapticSamplingRewardGradientConnection&lt; targetidentifierT &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classspore_1_1SynapticSamplingRewardGradientConnection__coll__graph.png" border="0" usemap="#spore_1_1SynapticSamplingRewardGradientConnection_3_01targetidentifierT_01_4_coll__map" alt="Collaboration graph"/></div>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:af001fdaff51333b8945684ebc21e3118"><td class="memItemLeft" align="right" valign="top"><a id="af001fdaff51333b8945684ebc21e3118"></a>
typedef <a class="el" href="classspore_1_1SynapticSamplingRewardGradientCommonProperties.html">SynapticSamplingRewardGradientCommonProperties</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html#af001fdaff51333b8945684ebc21e3118">CommonPropertiesType</a></td></tr>
<tr class="memdesc:af001fdaff51333b8945684ebc21e3118"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type to use for representing common synapse properties. <br /></td></tr>
<tr class="separator:af001fdaff51333b8945684ebc21e3118"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae947cfb6d704d7d62afaa3a7665f26b3"><td class="memItemLeft" align="right" valign="top"><a id="ae947cfb6d704d7d62afaa3a7665f26b3"></a>
typedef nest::Connection&lt; targetidentifierT &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html#ae947cfb6d704d7d62afaa3a7665f26b3">ConnectionBase</a></td></tr>
<tr class="memdesc:ae947cfb6d704d7d62afaa3a7665f26b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shortcut for base class. <br /></td></tr>
<tr class="separator:ae947cfb6d704d7d62afaa3a7665f26b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af6df0290de0c2375aaf78d5300c64be6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html#af6df0290de0c2375aaf78d5300c64be6">SynapticSamplingRewardGradientConnection</a> ()</td></tr>
<tr class="separator:af6df0290de0c2375aaf78d5300c64be6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a51e2bb57ed5a2c24f213fbe16b74fc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html#a6a51e2bb57ed5a2c24f213fbe16b74fc">SynapticSamplingRewardGradientConnection</a> (const <a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html">SynapticSamplingRewardGradientConnection</a>&lt; targetidentifierT &gt; &amp;rhs)</td></tr>
<tr class="separator:a6a51e2bb57ed5a2c24f213fbe16b74fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83db2da4c299e01d517c126e8aa2f5fa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html#a83db2da4c299e01d517c126e8aa2f5fa">~SynapticSamplingRewardGradientConnection</a> ()</td></tr>
<tr class="separator:a83db2da4c299e01d517c126e8aa2f5fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20d3e1ba0367bc20e9a1e185ad4a8e0a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html#a20d3e1ba0367bc20e9a1e185ad4a8e0a">check_connection</a> (nest::Node &amp;s, nest::Node &amp;t, nest::rport receptor_type, double t_lastspike, const <a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html#af001fdaff51333b8945684ebc21e3118">CommonPropertiesType</a> &amp;cp)</td></tr>
<tr class="separator:a20d3e1ba0367bc20e9a1e185ad4a8e0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2bf04d6390693820479a29bdf3ca34da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html#a2bf04d6390693820479a29bdf3ca34da">get_status</a> (DictionaryDatum &amp;d) const</td></tr>
<tr class="separator:a2bf04d6390693820479a29bdf3ca34da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e69452b8a5c6bf45613beab787e2996"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html#a0e69452b8a5c6bf45613beab787e2996">set_status</a> (const DictionaryDatum &amp;d, nest::ConnectorModel &amp;cm)</td></tr>
<tr class="memdesc:a0e69452b8a5c6bf45613beab787e2996"><td class="mdescLeft">&#160;</td><td class="mdescRight">Status setter function.  <a href="#a0e69452b8a5c6bf45613beab787e2996">More...</a><br /></td></tr>
<tr class="separator:a0e69452b8a5c6bf45613beab787e2996"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd7d033cb6510c8aaae2275741c11976"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html#abd7d033cb6510c8aaae2275741c11976">send</a> (nest::Event &amp;e, nest::thread t, double t_lastspike, const <a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html#af001fdaff51333b8945684ebc21e3118">CommonPropertiesType</a> &amp;cp)</td></tr>
<tr class="separator:abd7d033cb6510c8aaae2275741c11976"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9da32ac84181ef06acc56ced6124899"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html#af9da32ac84181ef06acc56ced6124899">check_synapse_params</a> (const DictionaryDatum &amp;syn_spec) const</td></tr>
<tr class="separator:af9da32ac84181ef06acc56ced6124899"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename targetidentifierT&gt;<br />
class spore::SynapticSamplingRewardGradientConnection&lt; targetidentifierT &gt;</h3>

<p>Reward-based synaptic sampling connection class. </p>
<p>This connection type implements the Bayesian policy sampling algorithm introduced in [1,2]. The target node to which synapses of this type are connected must be derived from <a class="el" href="classspore_1_1TracingNode.html" title="Base class to all nodes that record traces. ">TracingNode</a>. A second node which is also derived from type <a class="el" href="classspore_1_1TracingNode.html" title="Base class to all nodes that record traces. ">TracingNode</a> must be registered to the synapse model at its <em>reward_transmitter</em> parameter. The synapse model performs a stochastic policy search which tries to maximize the reward signal provided by the <em>reward_transmitter</em> node. At the same time synaptic weights are constraint by a Gaussian prior with mean <img class="formulaInl" alt="$\mu$" src="form_10.png"/> and standard deviation <img class="formulaInl" alt="$\sigma$" src="form_81.png"/>. This synapse type can not change its sign, i.e. synapses are either excitatory or inhibitory depending on the sign of the <em>weight_scale</em> parameter. If synaptic weights fall below a threshold (determined by parameter <em>parameter_mapping_offset</em>) weights are clipped to zero (retracted synapses). The synapse model also implements an optional mechanism to automatically remove retracted synapses from the simulation. This mechanism can be turned on using the <em>delete_retracted_synapses</em> parameter.</p>
<p><b>Parameters and state variables</b></p>
<p>The following parameters can be set in the common properties dictionary (default values and constraints are given in parentheses, corresponding symbols in the equations given below and in [1,2] are given in braces): </p><table class="doxtable">
<tr>
<th>name </th><th>type </th><th>comment </th></tr>
<tr>
<td><em>learning_rate</em>  </td><td>double </td><td>learning rate (5e-08, &ge;0.0) { <img class="formulaInl" alt="$\beta$" src="form_36.png"/>} </td></tr>
<tr>
<td><em>temperature</em>  </td><td>double </td><td>amplitude of parameter noise (0.1, &ge;0.0) { <img class="formulaInl" alt="$T_\theta$" src="form_37.png"/>} </td></tr>
<tr>
<td><em>gradient_noise</em>  </td><td>double </td><td>amplitude of gradient noise (0.0, &ge;0.0) { <img class="formulaInl" alt="$T_g$" src="form_38.png"/>} </td></tr>
<tr>
<td><em>psp_tau_rise</em>  </td><td>double </td><td>double exponential PSP kernel rise (2.0, &gt;0.0) [ms] { <img class="formulaInl" alt="$\tau_r$" src="form_27.png"/>} </td></tr>
<tr>
<td><em>psp_tau_fall</em>  </td><td>double </td><td>double exponential PSP kernel decay (20.0, &gt;0.0) [ms] { <img class="formulaInl" alt="$\tau_m$" src="form_26.png"/>} </td></tr>
<tr>
<td><em>psp_cutoff_amplitude</em>  </td><td>double </td><td>psp is clipped to 0 below this value (0.0001, &ge;0.0) { <img class="formulaInl" alt="$\tau_m$" src="form_26.png"/>} </td></tr>
<tr>
<td><em>integration_time</em>  </td><td>double </td><td>time of gradient integration (50000.0, &gt;0.0) [ms] { <img class="formulaInl" alt="$\tau_g$" src="form_45.png"/>} </td></tr>
<tr>
<td><em>episode_length</em>  </td><td>double </td><td>length of eligibility trace (1000.0, &gt;0.0) [ms] { <img class="formulaInl" alt="$\tau_e$" src="form_46.png"/>} </td></tr>
<tr>
<td><em>weight_update_interval</em>  </td><td>double </td><td>interval of synaptic weight updates (100.0, &gt;0.0) [ms] </td></tr>
<tr>
<td><em>parameter_mapping_offset</em>  </td><td>double </td><td>offset parameter for computing synaptic weight (3.0) { <img class="formulaInl" alt="$\theta_0$" src="form_47.png"/>} </td></tr>
<tr>
<td><em>weight_scale</em>  </td><td>double </td><td>scaling factor for the synaptic weight (1.0) { <img class="formulaInl" alt="$w_0$" src="form_84.png"/>}  </td></tr>
<tr>
<td><em>direct_gradient_rate</em>  </td><td>double </td><td>rate of directly applying changes to the synaptic parameter (0.0) { <img class="formulaInl" alt="$c_e$" src="form_51.png"/>}  </td></tr>
<tr>
<td><em>gradient_scale</em>  </td><td>double </td><td>scaling parameter for the gradient (1.0) { <img class="formulaInl" alt="$c_g$" src="form_52.png"/>} </td></tr>
<tr>
<td><em>max_param</em>  </td><td>double </td><td>maximum synaptic parameter (5.0) </td></tr>
<tr>
<td><em>min_param</em>  </td><td>double </td><td>minimum synaptic parameter (-2.0) </td></tr>
<tr>
<td><em>max_param_change</em>  </td><td>double </td><td>maximum synaptic parameter change (40.0, &ge;0.0)  </td></tr>
<tr>
<td><em>reward_transmitter</em>  </td><td>long </td><td>GID of the synapse's reward transmitter* </td></tr>
<tr>
<td><em>bap_trace_id</em>  </td><td>long </td><td>ID of the BAP trace (0, &ge;0) </td></tr>
<tr>
<td><em>dopa_trace_id</em>  </td><td>long </td><td>ID of the dopamine trace (0, &ge;0) </td></tr>
<tr>
<td><em>simulate_retracted_synapses</em>  </td><td>bool </td><td>continue simulating retracted synapses (false) </td></tr>
<tr>
<td><em>delete_retracted_synapses</em>  </td><td>bool </td><td>delete retracted synapses (false) </td></tr>
</table>
<p>*) <em>reward_transmitter</em> must be set to the GID of a <a class="el" href="classspore_1_1TracingNode.html" title="Base class to all nodes that record traces. ">TracingNode</a> before simulation startup.</p>
<p>The following parameters can be set in the status dictionary: </p><table class="doxtable">
<tr>
<th>name </th><th>type </th><th>comment </th></tr>
<tr>
<td><em>synaptic_parameter</em>  </td><td>double </td><td>current synaptic parameter { <img class="formulaInl" alt="$\theta(t)$" src="form_56.png"/>}  </td></tr>
<tr>
<td><em>weight</em>  </td><td>double </td><td>current synaptic weight { <img class="formulaInl" alt="$w(t)$" src="form_57.png"/>} </td></tr>
<tr>
<td><em>eligibility_trace</em>  </td><td>double </td><td>current eligibility trace { <img class="formulaInl" alt="$e(t)$" src="form_59.png"/>} </td></tr>
<tr>
<td><em>reward_gradient</em>  </td><td>double </td><td>current reward gradient { <img class="formulaInl" alt="$g(t)$" src="form_55.png"/>} </td></tr>
<tr>
<td><em>prior_mean</em>  </td><td>double </td><td>mean of the Gaussian prior { <img class="formulaInl" alt="$\mu$" src="form_10.png"/>} </td></tr>
<tr>
<td><em>prior_precision</em>  </td><td>double </td><td>precision of the Gaussian prior { <img class="formulaInl" alt="$c_p$" src="form_60.png"/>} </td></tr>
<tr>
<td><em>recorder_times</em>  </td><td>[double] </td><td>time points of parameter recordings* </td></tr>
<tr>
<td><em>weight_values</em>  </td><td>[double] </td><td>array of recorded synaptic weight values*  </td></tr>
<tr>
<td><em>synaptic_parameter_values</em>  </td><td>[double] </td><td>array of recorded synaptic parameter values*  </td></tr>
<tr>
<td><em>reward_gradient_values</em>  </td><td>[double] </td><td>array of recorded reward gradient values*  </td></tr>
<tr>
<td><em>eligibility_trace_values</em>  </td><td>[double] </td><td>array of recorded eligibility trace values*  </td></tr>
<tr>
<td><em>psp_values</em>  </td><td>[double] </td><td>array of recorded psp values* </td></tr>
<tr>
<td><em>recorder_interval</em>  </td><td>double </td><td>interval of synaptic recordings [ms] </td></tr>
<tr>
<td><em>reset_recorder</em>  </td><td>bool </td><td>clear all recorded values now* (write only)  </td></tr>
</table>
<p>*) Recorder fields are read only. If <em>reset_recorder</em> is set to <code>true</code> all recorder fields will be cleared instantaneously.</p>
<p><b>Implementation Details</b></p>
<p>This connection type is a diligent synapse model, therefore updates are triggered on a regular interval which is ensured by the <a class="el" href="classspore_1_1ConnectionUpdateManager.html" title="Class that manages updating diligent connections. ">ConnectionUpdateManager</a>. The state of each synapse consists of the variables <img class="formulaInl" alt="$y(t), e(t), g(t), \theta(t), w(t)$" src="form_20.png"/>. The variable <img class="formulaInl" alt="$y(t)$" src="form_21.png"/> is the presynaptic spike train filtered with a PSP kernel <img class="formulaInl" alt="$\epsilon(t)$" src="form_23.png"/> of the form </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ \epsilon(t) \;=\; \frac{\tau_r}{\tau_m - \tau_r}\left( e^{-\frac{1}{\tau_m}} - e^{-\frac{1}{\tau_r}} \right)\;. \hspace{24px} (1) \]" src="form_75.png"/>
</p>
<p> A node derived from type <a class="el" href="classspore_1_1TracingNode.html" title="Base class to all nodes that record traces. ">TracingNode</a> must be registered to the synapse model at its <em>reward_transmitter</em> parameter. The trace of this node at id <em>dopa_trace_id</em> is used as reward signal <img class="formulaInl" alt="$dopa(t)$" src="form_49.png"/>. The trace of the postsynaptic neuron with id <em>bap_trace_id</em> is used as back-propagating signal <img class="formulaInl" alt="$bap(t)$" src="form_50.png"/>. The synapse then solves the following set of differential equations: </p><p class="formulaDsp">
<img class="formulaDsp" alt="\[ \frac{d e(t)}{dt} \;=\; -\frac{1}{\tau_e} e(t) \,+\, w(t)\,y(t)\,bap(t) \hspace{24px} (2) \]" src="form_77.png"/>
</p>
 <p class="formulaDsp">
<img class="formulaDsp" alt="\[ \frac{d g(t)}{dt} \;=\; -\frac{1}{\tau_g} g(t) \,+\, dopa(t)\,e(t) \,+\, T_g\,d \mathcal{W}_g \hspace{24px} (3) \]" src="form_78.png"/>
</p>
 <p class="formulaDsp">
<img class="formulaDsp" alt="\[ d \theta(t) \;=\; \beta\,\bigg( c_p (\mu - \theta(t)) + c_g\,g(t) + c_e \, dopa(t) \,e(t) \bigg) dt \,+\, \sqrt{ 2 T_\theta \beta } \, \mathcal{W}_{\theta} \hspace{24px} (4) \]" src="form_87.png"/>
</p>
 <p class="formulaDsp">
<img class="formulaDsp" alt="\[ w(t) \;=\; w_0 \, \exp ( \theta(t) - \theta_0 ) \hspace{24px} (5) \]" src="form_85.png"/>
</p>
<p> The precision of the prior in equation (4) relates to the standard deviation as <img class="formulaInl" alt="$c_p = 1/\sigma^2$" src="form_82.png"/>. Setting <img class="formulaInl" alt="$c_p=0$" src="form_83.png"/> corresponds to a non-informative (flat) prior.</p>
<p>The differential equations (2-5) are solved using Euler integration. The dynamics of the postsynaptic term <img class="formulaInl" alt="$y(t)$" src="form_21.png"/>, the eligibility trace <img class="formulaInl" alt="$e(t)$" src="form_59.png"/> and the reward gradient <img class="formulaInl" alt="$g(t)$" src="form_55.png"/> are updated at each NEST time step. The dynamics of <img class="formulaInl" alt="$\theta(t)$" src="form_56.png"/> and <img class="formulaInl" alt="$w(t)$" src="form_57.png"/> are updated on a time grid based on <em>weight_update_interval</em>. The synaptic weights remain constant between two updates. The synapse recorder is only invoked after each weight update which means that <em>recorder_interval</em> must be a multiple of <em>weight_update_interval</em>. Synaptic parameters are clipped at <em>min_param</em> and <em>max_param</em>. Parameter gradients are clipped at +/- <em>max_param_change</em>. Synaptic weights of synapses for which <img class="formulaInl" alt="$\theta(t)$" src="form_56.png"/> falls below 0 are clipped to 0 (retracted synapses). If <em>simulate_retracted_synapses</em> is set to <code>false</code> simulation of <img class="formulaInl" alt="$y(t), e(t)$" src="form_54.png"/> and <img class="formulaInl" alt="$g(t)$" src="form_55.png"/> is not continued for retracted synapse. This means that only the stochastic dynamics of <img class="formulaInl" alt="$\theta(t)$" src="form_56.png"/> are simulated until the synapse is reformed again. During this time, the reward gradient <img class="formulaInl" alt="$g(t)$" src="form_55.png"/> is fixed to 0. If <em>delete_retracted_synapses</em> is set to <code>true</code>, retracted synapses will be removed from the network using the garbage collector of the <a class="el" href="classspore_1_1ConnectionUpdateManager.html" title="Class that manages updating diligent connections. ">ConnectionUpdateManager</a>.</p>
<p><b>References</b></p>
<p>[1] David Kappel, Robert Legenstein, Stefan Habenschuss, Michael Hsieh and Wolfgang Maass. <em>Reward-based self-configuration of neural circuits.</em> 2017. <a href="https://arxiv.org/abs/1704.04238">https://arxiv.org/abs/1704.04238</a></p>
<p>[2] Zhaofei Yu, David Kappel, Robert Legenstein, Sen Song, Feng Chen and Wolfgang Maass. <em>CaMKII activation supports reward-based neural network optimization through Hamiltonian sampling.</em> 2016. <a href="https://arxiv.org/abs/1606.00157">https://arxiv.org/abs/1606.00157</a></p>
<dl class="section author"><dt>Author</dt><dd>David Kappel, Michael Hsieh</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classspore_1_1TracingNode.html" title="Base class to all nodes that record traces. ">TracingNode</a>, <a class="el" href="classspore_1_1DiligentConnectorModel.html" title="Connector model for diligent connections. ">DiligentConnectorModel</a> </dd></dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af6df0290de0c2375aaf78d5300c64be6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6df0290de0c2375aaf78d5300c64be6">&#9670;&nbsp;</a></span>SynapticSamplingRewardGradientConnection() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename targetidentifierT &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html">spore::SynapticSamplingRewardGradientConnection</a>&lt; targetidentifierT &gt;::<a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html">SynapticSamplingRewardGradientConnection</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Default Constructor. </p>

</div>
</div>
<a id="a6a51e2bb57ed5a2c24f213fbe16b74fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a51e2bb57ed5a2c24f213fbe16b74fc">&#9670;&nbsp;</a></span>SynapticSamplingRewardGradientConnection() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename targetidentifierT &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html">spore::SynapticSamplingRewardGradientConnection</a>&lt; targetidentifierT &gt;::<a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html">SynapticSamplingRewardGradientConnection</a> </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html">SynapticSamplingRewardGradientConnection</a>&lt; targetidentifierT &gt; &amp;&#160;</td>
          <td class="paramname"><em>rhs</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Copy Constructor. </p>

</div>
</div>
<a id="a83db2da4c299e01d517c126e8aa2f5fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83db2da4c299e01d517c126e8aa2f5fa">&#9670;&nbsp;</a></span>~SynapticSamplingRewardGradientConnection()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename targetidentifierT &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html">spore::SynapticSamplingRewardGradientConnection</a>&lt; targetidentifierT &gt;::~<a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html">SynapticSamplingRewardGradientConnection</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destructor. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a20d3e1ba0367bc20e9a1e185ad4a8e0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20d3e1ba0367bc20e9a1e185ad4a8e0a">&#9670;&nbsp;</a></span>check_connection()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename targetidentifierT&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html">spore::SynapticSamplingRewardGradientConnection</a>&lt; targetidentifierT &gt;::check_connection </td>
          <td>(</td>
          <td class="paramtype">nest::Node &amp;&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">nest::Node &amp;&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">nest::rport&#160;</td>
          <td class="paramname"><em>receptor_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>t_lastspike</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html#af001fdaff51333b8945684ebc21e3118">CommonPropertiesType</a> &amp;&#160;</td>
          <td class="paramname"><em>cp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Checks if the type of the postsynaptic node is supported. Throws an <em>IllegalConnection</em> exception if the postsynaptic node is not derived from <a class="el" href="classspore_1_1TracingNode.html" title="Base class to all nodes that record traces. ">TracingNode</a>. </p>

</div>
</div>
<a id="af9da32ac84181ef06acc56ced6124899"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9da32ac84181ef06acc56ced6124899">&#9670;&nbsp;</a></span>check_synapse_params()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename targetidentifierT &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html">spore::SynapticSamplingRewardGradientConnection</a>&lt; targetidentifierT &gt;::check_synapse_params </td>
          <td>(</td>
          <td class="paramtype">const DictionaryDatum &amp;&#160;</td>
          <td class="paramname"><em>syn_spec</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check syn_spec dictionary for parameters that are not allowed for this connection. Will issue warning or throw error if a parameter is found. </p>

</div>
</div>
<a id="a2bf04d6390693820479a29bdf3ca34da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2bf04d6390693820479a29bdf3ca34da">&#9670;&nbsp;</a></span>get_status()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename targetidentifierT &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html">spore::SynapticSamplingRewardGradientConnection</a>&lt; targetidentifierT &gt;::get_status </td>
          <td>(</td>
          <td class="paramtype">DictionaryDatum &amp;&#160;</td>
          <td class="paramname"><em>d</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Status getter function. </p>

</div>
</div>
<a id="abd7d033cb6510c8aaae2275741c11976"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd7d033cb6510c8aaae2275741c11976">&#9670;&nbsp;</a></span>send()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename targetidentifierT &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html">spore::SynapticSamplingRewardGradientConnection</a>&lt; targetidentifierT &gt;::send </td>
          <td>(</td>
          <td class="paramtype">nest::Event &amp;&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">nest::thread&#160;</td>
          <td class="paramname"><em>thread</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>t_last_spike</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html#af001fdaff51333b8945684ebc21e3118">CommonPropertiesType</a> &amp;&#160;</td>
          <td class="paramname"><em>cp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Send an event to the postsynaptic neuron. This will update the synapse state and synaptic weights to the current slice origin and send the spike event. This method is also triggered by the <a class="el" href="classspore_1_1ConnectionUpdateManager.html" title="Class that manages updating diligent connections. ">ConnectionUpdateManager</a> to indicate that the synapse is running out of date. In this case an invalid rport of -1 is passed and the spike is not delivered to the postsynaptic neuron.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">e</td><td>the spike event. </td></tr>
    <tr><td class="paramname">thread</td><td>the id of the connections thread. </td></tr>
    <tr><td class="paramname">t_last_spike</td><td>the time of the last spike. </td></tr>
    <tr><td class="paramname">cp</td><td>the synapse type common properties. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0e69452b8a5c6bf45613beab787e2996"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e69452b8a5c6bf45613beab787e2996">&#9670;&nbsp;</a></span>set_status()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename targetidentifierT &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classspore_1_1SynapticSamplingRewardGradientConnection.html">spore::SynapticSamplingRewardGradientConnection</a>&lt; targetidentifierT &gt;::set_status </td>
          <td>(</td>
          <td class="paramtype">const DictionaryDatum &amp;&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">nest::ConnectorModel &amp;&#160;</td>
          <td class="paramname"><em>cm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Status setter function. </p>
<dl class="section note"><dt>Note</dt><dd><em>weight</em> will be overwritten next time when the synapse is updated. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="synaptic__sampling__rewardgradient__connection_8h_source.html">synaptic_sampling_rewardgradient_connection.h</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Nov 23 2017 14:30:15 for SPORE by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
